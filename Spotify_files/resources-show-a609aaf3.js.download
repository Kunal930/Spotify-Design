import{r as n}from"./stimulus-helpers-50266f37.js";import{E as d}from"./ez-base-controller-29e49ea5.js";import{a as i}from"./helpers-a84f7625.js";import{sendTrackingEvent as t}from"./tracking-0dbb49c1.js";import{af as l,ag as c,ah as h}from"./actions-6b3b15bd.js";import{C as s}from"./js.cookie-c0fbedcc.js";import{b as m,c as g}from"./sessions-manager-14ebd4ab.js";import{i as u}from"./tooltips-87e84986.js";import{g as o}from"./resource-show-helpers-d7044901.js";import"./init-user-05a6553c.js";import"./_commonjsHelpers-de833af9.js";import"./preload-helper-be1680a6.js";class r extends d{constructor(){super(...arguments),this.contributorClick=e=>{this.trackContributorClick(e)}}connect(){m(this.element.dataset.resourceId),g("most_recent_resource_id",this.element.dataset.resourceId),this.element.dataset.autodlPath&&this.triggerResourceDownload(),document.querySelector('[data-ez-tooltip="true"]')&&u()}triggerResourceDownload(){const e=s.get("download_size_for_checkout")||"original";e!=="original"&&document.querySelector(`[data-controller="download-btn"][data-size="${e}"]`)?setTimeout(()=>{document.querySelector(`[data-controller="download-btn"][data-size="${e}"]`).click()},500):window.location=this.element.dataset.autodlPath,t({element:this.element,data:{action:l,label:o(),category:"Show",content_type:`Content-${i()}`}}),s.remove("download_size_for_checkout")}trackContributorClick(e){t({element:e.target,data:{action:c}})}trackLicenseClick(e){t({element:e.target,data:{action:h,category:"Show",label:o(),content_type:`Content-${i()}`}})}updateSelectedLicense(e){e.target.id==="free-license"?this.showFreeHidePro():this.showProHideFree()}showFreeHidePro(){this.proLicenseTarget.removeAttribute("checked"),this.freeLicenseTarget.setAttribute("checked","checked"),this.downloadBtnTarget.firstElementChild.classList.add("is-hidden"),this.downloadBtnTarget.lastElementChild.classList.remove("is-hidden"),this.attributionBlockTarget.firstElementChild.classList.add("is-hidden"),this.attributionBlockTarget.lastElementChild.classList.remove("is-hidden"),this.photoSizeBtnTarget&&(this.photoSizeBtnTarget.classList.add("license-free"),this.photoSizeBtnTarget.classList.remove("license-pro"),this.proLicenseDlSizesTarget.classList.add("is-hidden"),this.freeLicenseDlSizesTarget.classList.remove("is-hidden"))}showProHideFree(){this.freeLicenseTarget.removeAttribute("checked"),this.proLicenseTarget.setAttribute("checked","checked"),this.downloadBtnTarget.lastElementChild.classList.add("is-hidden"),this.downloadBtnTarget.firstElementChild.classList.remove("is-hidden"),this.attributionBlockTarget.lastElementChild.classList.add("is-hidden"),this.attributionBlockTarget.firstElementChild.classList.remove("is-hidden"),this.photoSizeBtnTarget&&(this.photoSizeBtnTarget.classList.add("license-pro"),this.photoSizeBtnTarget.classList.remove("license-free"),this.freeLicenseDlSizesTarget.classList.add("is-hidden"),this.proLicenseDlSizesTarget.classList.remove("is-hidden"))}}r.targets=["resource","sidebar","downloadBtn","attributionBlock","proLicense","freeLicense","photoSizeBtn","proLicenseDlSizes","freeLicenseDlSizes"];n([["resource-show-main",r]]);
