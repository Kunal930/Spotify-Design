var d=Object.defineProperty;var c=(t,s,e)=>s in t?d(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var i=(t,s,e)=>(c(t,typeof s!="symbol"?s+"":s,e),e);import{_ as o}from"./preload-helper-be1680a6.js";import{C as u,r as _}from"./stimulus-helpers-50266f37.js";import{f as n}from"./helpers-a84f7625.js";import{b as h}from"./plan-helpers-84550346.js";import{sendTrackingEvent as a,trackCompleteEvent as p,findCategoryByElement as E}from"./tracking-0dbb49c1.js";import{aq as f,E as g,ar as b}from"./actions-6b3b15bd.js";import{C as r}from"./js.cookie-c0fbedcc.js";import{E as C}from"./ez-base-controller-29e49ea5.js";import"./init-user-05a6553c.js";import"./_commonjsHelpers-de833af9.js";class m extends u{constructor(){super(...arguments);i(this,"dismiss",e=>{e.preventDefault(),e.stopPropagation(),this.setDismissedCookie(),document.body.classList.remove("has-bottom-banner"),this.element.remove()})}connect(){this.setupSessionBanner(),n("annual_cart_abandonment")&&this.cookieValue&&a({element:this.element,data:{action:f,label:"Plan-Unlimited Annual Universal",non_interaction:!0}}),document.body.classList.add("has-bottom-banner")}trackDiscount(){if(!n("annual_cart_abandonment"))return;const e=h({plans:[this.planValue]});a({data:{action:g,items:e}}),p({action:b,category:E(this.element),label:"Plan-Unlimited Annual Universal"})}setDismissedCookie(){if(this.cookieValue==="annual_cart_abandonment")return;const e=this.hasDismissExpiresValue?{domain:this.cookieDomain,expires:this.dismissExpiresValue}:{domain:this.cookieDomain};this.element.dataset.dismissSessionId||r.set(`${this.slugValue}_banner_dismissed`,"internal",e)}get cookieDomain(){const e=window.location.hostname.split(".");return`${e[1]}.${e[2]}`}setupSessionBanner(){const e=this.element.dataset.dismissSessionId;e&&sessionStorage.getItem(e)!=="1"&&this.element.classList.remove("is-hidden")}setSessionCookie(){const e=this.element.dataset.dismissSessionId;sessionStorage.setItem(e,"1")}removeBannerCookie(){r.remove(this.cookieValue)}}i(m,"values",{slug:String,dismissExpires:Number,cookie:String,plan:Object});let l;o(()=>import("./dom-slider-55479872.js"),[]).then(()=>{l=window.domSlider.slideUp});class k extends C{connect(){this.element.classList.contains("ez-flash-message--auto-dismiss")&&setTimeout(()=>{this.dismiss()},3e3),this.flagLoaded()}dismiss(){l({element:this.element})}}_([["site-banner",m],["flash-message",k],["teams-nag",o(()=>import("./teams-nag-controller-a22b2fc1.js"),[])],["language-switcher",o(()=>import("./language-switcher-controller-460df002.js"),[])]]);
