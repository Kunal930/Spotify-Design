import{_ as y}from"./preload-helper-be1680a6.js";import{C as d,r as E}from"./stimulus-helpers-50266f37.js";import{t as g,e as T,f as S}from"./helpers-a84f7625.js";import{sendTrackingEvent as i,findCategoryByElement as k,trackCompleteEvent as I}from"./tracking-0dbb49c1.js";import{aP as w,ai as N,m as O,k as H,J as z,h as P,aQ as x,aR as B,aS as q,aT as Q,aU as $,aV as A}from"./actions-6b3b15bd.js";import{M as p}from"./media-matcher-b9d0b27a.js";import{e as m}from"./events-1a058a8a.js";import{d as U}from"./partner-popup-helpers-1f35ef94.js";import{i as J}from"./search-helpers-68c4a0d8.js";import{a as F}from"./ajax-helpers-b23bc37b.js";import{C as R}from"./js.cookie-c0fbedcc.js";import"./init-user-05a6553c.js";import"./_commonjsHelpers-de833af9.js";import"./partner-id-helpers-1c8ec9a7.js";import"./index-266db5bb.js";import"./modal_helpers-630b4868.js";const o=new p,c=1300,l=`(max-width: ${c}px)`;class u extends d{constructor(){super(...arguments),this.prependIds=["menu-group-join-pro"],this.addMobileShadowCollectionLink=()=>{this.mobileShadowCollectionLinkTarget.href=this.shadowCollectionLinkValue},this.checkMobileMenuStatus=()=>{this.ezDropdownMenuTargets.length>1?this.ezDropdownMenuTargets.forEach(e=>{e.classList.contains("is-closed")&&this.removeMobileMenuOverlay()}):this.removeMobileMenuOverlay()},this.toggleMobileMenuScrollClasses=e=>{g("CloseExploreSubMenus"),e.currentTarget.parentNode.classList.contains("is-closed")?document.querySelector("body").classList.remove("has-open-mobile-menu","has-active-mobile-submenu"):document.querySelector("body").classList.add("has-open-mobile-menu")},this.removeMobileMenuOverlay=()=>{const e=document.querySelector(".ez-dark-overlay.has-active-mobile-explore-nav");e&&(e.remove(),document.querySelector("body").classList.remove("has-open-mobile-menu","has-active-mobile-submenu"))},this.createMobileMenuOverlay=()=>{T()>800||(this.removeMobileMenuOverlay(),this.ezDropdownMenuTargets.forEach(e=>{if(e.classList.contains("is-open")){this.removeMobileMenuOverlay(),document.querySelector("body").classList.add("has-open-mobile-menu"),this.createOverlay("click->site-header#removeMobileMenuOverlay","has-active-mobile-explore-nav");return}}))},this.trackExploreClick=e=>{i({element:e.target,data:{action:w,label:`Link-${e.target.dataset.englishLabel}`,content_type:`Content-${e.target.dataset.contentType}`}})}}connect(){this.hasMobileMenuTarget&&(this.setupMenuGroupParents(),this.hasShadowCollectionLinkValue&&this.hasMobileShadowCollectionLinkTarget&&this.addMobileShadowCollectionLink(),this.setupSiteNavigationMediaQueries(),window.addEventListener(m.util.ez_drop_down.close_drop_down,this.checkMobileMenuStatus),o.evaluateAll(),o.addListeners())}disconnect(){o.removeListeners(),o.clearQueries(),window.removeEventListener(m.util.ez_drop_down.close_drop_down,this.checkMobileMenuStatus)}createOverlay(e,t){const s=document.createElement("DIV");s.classList.add("ez-dark-overlay"),s.classList.add(t),s.dataset.action=e,this.element.appendChild(s)}clearSearchInput(){this.searchField.value="",this.searchField.focus()}toggleMobileSearch(){const e=document.querySelector("body"),t=document.querySelector(".ez-dark-overlay.mobile-search-overlay");e.classList.toggle("is-mobile-search"),e.classList.contains("is-mobile-search")&&!t?(this.savedVal=this.searchField.value,this.createOverlay("click->site-header#toggleMobileSearch","mobile-search-overlay"),this.searchField.focus(),this.searchField.value="",this.searchField.value=this.savedVal):!e.classList.contains("is-mobile-search")&&t?(t.remove(),this.searchField.value=this.savedVal):(t.dataset.action="click->site-header#toggleMobileSearch",this.searchField.value="",this.searchField.value=this.savedVal)}setupSiteNavigationMediaQueries(){const e=document.querySelector("body").classList;e.contains("is-logged-in")&&e.contains("is-pro")?this.setupProUserMediaQueries():e.contains("is-logged-in")?this.setupLoggedInMediaQueries():this.setupLoggedOutMediaQueries(),this.setupSearchCloseQueries()}setupSearchCloseQueries(){o.addMediaQuery("(max-width: 635px)",null,()=>{document.querySelector(".ez-dark-overlay.mobile-search-overlay")&&this.toggleMobileSearch()})}setupProUserMediaQueries(){o.addMediaQuery(l,()=>{this.collectAllMenuGroups()},()=>{this.mobileMenuItems()&&this.restoreAllMenuGroups()})}setupLoggedInMediaQueries(){o.addMediaQuery(`(min-width: ${c+1}px)`,()=>{this.restoreAllMenuGroups()}),o.addMediaQuery(`(max-width: ${c}px) and (min-width: 1101px)`,()=>{this.restoreAllMenuGroups()}),o.addMediaQuery(l,()=>{this.collectAllMenuGroups()})}setupLoggedOutMediaQueries(){o.addMediaQuery(l,()=>{this.collectAllMenuGroups()},()=>{this.mobileMenuItems()&&this.restoreAllMenuGroups()})}setupMenuGroupParents(){this.menuGroupTargets.forEach(e=>{const t=e.closest(".ez-site-header__submenu-wrapper");!e.dataset.parentMenu&&t&&(e.dataset.parentMenu=t.id)})}collectMenuGroup(e,t){if(!e)return!1;const s=e.closest(".ez-site-header__submenu-wrapper");if(s&&s.classList.add("is-hidden"),this.prependIds.includes(e.id)?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),this.isJoinButtonGroup(e)){const a=e.querySelector("a.ez-site-header__menu-item");this.dressUpJoinButton(a)}}collectAllMenuGroups(){this.menuGroupTargets.forEach(e=>{this.isStaticMenuGroup(e)||(this.removeCategoryImages(e),this.collectMenuGroup(e,this.mobileMenuTarget))})}removeCategoryImages(e){e.querySelectorAll(".explore-nav__submenu__category-image").forEach(s=>{s.remove()})}restoreMenuGroup(e,t){if(t.closest(".ez-site-header__submenu-wrapper").classList.remove("is-hidden"),this.prependIds.includes(e.id)?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),this.isJoinButtonGroup(e)){const a=e.querySelector("a.ez-btn--light");this.dressDownJoinButton(a)}}restoreAllMenuGroups(){this.menuGroupTargets.forEach(e=>{if(this.isStaticMenuGroup(e))return;const t=document.querySelector(`#${e.dataset.parentMenu}`),s=t.querySelector(".ez-drop-down__submenu"),a=s||t;this.restoreMenuGroup(e,a)})}isJoinButtonGroup(e){return e.id==="menu-group-join-pro"}dressUpJoinButton(e){e&&!this.isSalesEventJoinBtn(e)&&(e.classList.add("ez-btn","ez-btn--light","ez-btn--medium"),e.classList.remove("ez-site-header__menu-item"))}dressDownJoinButton(e){e&&!this.isSalesEventJoinBtn(e)&&(e.classList.remove("ez-btn","ez-btn--light","ez-btn--medium"),e.classList.add("ez-site-header__menu-item"))}isSalesEventJoinBtn(e){return e.classList.contains("ez-site-header__menu-item--sales-event")}isStaticMenuGroup(e){return e.dataset.siteHeaderTarget.indexOf("menuGroupStatic")>-1}mobileMenuItems(){const e=this.mobileMenuTarget.querySelector("#mobile-menu .ez-drop-down__submenu-group"),t=this.mobileMenuTarget.querySelector("#mobile-menu .ez-site-header__submenu-group");return e||t}rebuyCredits(e){i({element:e.currentTarget,data:{action:N}})}headerLogin(){i({element:this.loginButtonTarget,data:{action:O}})}headerSignUp(){i({element:this.signupButtonTarget,data:{action:H}})}sendHeaderJoinProEvent(e){const t=k(e.target);i({element:e.target,data:{action:z,category:t}}),I({action:P,category:t})}get searchField(){return this.element.querySelector(".ez-search-form__input")}}u.values={shadowCollectionLink:String};u.targets=["menuGroup","menuGroupStatic","subMenu","mobileMenu","mainUserMenu","loginButton","signupButton","ezDropdownMenu","mobileShadowCollectionLink"];const r=new p,n={bundles:x,photos:B,vectors:q,videos:Q};class M extends d{constructor(){super(...arguments),this.addParentNavHover=()=>{this.hasItemNavTarget&&this.itemNavTarget.addEventListener("mouseleave",this.leavingSubmenuParent)},this.removeParentNavHover=()=>{this.hasItemNavTarget&&this.itemNavTarget.removeEventListener("mouseleave",this.leavingSubmenuParent)},this.addMenuHovers=()=>{this.itemTargets.forEach(e=>{e.addEventListener("mouseenter",this.enterMenuItem),e.addEventListener("mouseleave",this.leaveMenuItem)})},this.removeMenuHovers=()=>{this.itemTargets.forEach(e=>{e.removeEventListener("mouseenter",this.enterMenuItem),e.removeEventListener("mouseleave",this.leaveMenuItem)})},this.enterMenuItem=e=>{e.currentTarget.classList.add("is-hovered"),e.target.parentElement.classList.contains("is-hovered")?e.target.classList.contains("is-hovered")&&e.target.classList.add("is-active"):setTimeout(function(){e.target.classList.contains("is-hovered")&&(e.target.classList.add("is-active"),e.target.parentElement.classList.add("is-hovered"))},375)},this.leaveMenuItem=e=>{e.target.classList.remove("is-hovered","is-active"),e.target.querySelector(".ez-drop-down__submenu")&&this.itemNavTarget.addEventListener("mouseleave",this.leavingSubmenuParent)},this.leavingSubmenuParent=e=>{e.target.classList.remove("is-hovered")},this.hideMobileMenuItems=e=>{this.mobileMenuItemTargets.forEach(t=>{t!=e&&t.classList.remove("is-active")})}}connect(){this.setupPreviewMediaQueries(),r.evaluateAll(),r.addListeners(),window.addEventListener("CloseExploreSubMenus",this.hideMobileMenuItems)}disconnect(){r.removeListeners(),r.clearQueries(),window.removeEventListener("CloseExploreSubMenus",this.hideMobileMenuItems)}trackMenuClick(e){const t=this.getMenuContentType(e.target);i({data:{action:n[t],label:"menu",category:"Header"}})}trackExploreCategoryClick(e){const t=this.getMenuContentType(e.target),{category:s}=e.params;i({data:{action:n[t],label:`search-${s}`,category:"Header"}}),U({searchTerm:s}),J()}trackExploreContributorClick(e){const t=this.getMenuContentType(e.target),{contributorName:s}=e.params;i({data:{action:n[t],label:`contributor-${s}`,category:"Header"}})}trackExploreLinkClick(e){const t=this.getMenuContentType(e.target),{linkTitle:s}=e.params;i({data:{action:n[t],label:`link-${s}`,category:"Header"}})}getMenuContentType(e){return(e.closest(".ez-drop-down__title")||e.closest(".mobile-menu-group__title")).dataset.title}setupPreviewMediaQueries(){r.addMediaQuery("(min-width: 801px)",()=>{this.addMenuHovers(),this.addParentNavHover(),this.removeCategoryMobileHeading()},()=>{this.removeMenuHovers(),this.removeParentNavHover(),this.insertCategoryMobileHeading()})}insertCategoryMobileHeading(){this.hasMobileCategoriesHeadingTarget||this.mobileCategoriesHeadingTemplateTargets.forEach(e=>{e.insertAdjacentHTML("beforebegin",`${e.innerHTML}`)})}removeCategoryMobileHeading(){this.mobileCategoriesHeadingTargets.forEach(e=>{e.remove()})}mobileMenuItemClicked(e){const t=e.currentTarget.closest(".mobile-menu-group__title");t.classList.contains("is-active")?document.querySelector("body").classList.remove("has-active-mobile-submenu"):document.querySelector("body").classList.add("has-active-mobile-submenu"),t.classList.toggle("is-active"),this.hideMobileMenuItems(t)}resetColorFilter(){document.querySelector('[data-controller="color-filter"]')&&g("resetColorSwatchFilter")}}M.targets=["itemNav","item","mobileMenuItem","mobileCategoriesHeading","mobileCategoriesHeadingTemplate"];class v extends d{connect(){this.contentRequested=!1,this.seenCookieUpdated=!1,this.activeIds=JSON.parse(this.unseenBadgeTarget.dataset.activeNotifications),this.seenIds=JSON.parse(this.unseenBadgeTarget.dataset.seenNotifications)}getMarketingNotifications(){this.contentRequested||(this.contentRequested=!0,F("/api/v2/marketing_notifications",e=>{this.setNotifications(e.data.marketing_notifications)},e=>{console.error(e)}))}setNotifications(e){if(this.spinnerTarget.classList.add("is-hidden"),e.length===0){this.noNotifications();return}e.forEach((t,s)=>{const a=this.marketingTemplate(t,s+1);this.listTarget.insertAdjacentHTML("beforeend",a)})}noNotifications(){const e=`
      <li class="notification-item no-notifications">
        <h3>Currently no notifications</h3>
        <p>Please check back later</p>
      </li>
    `;this.listTarget.insertAdjacentHTML("beforeend",e)}menuClick(e){e.currentTarget.parentNode.classList.contains("is-closed")||(this.getMarketingNotifications(),this.seenCookieUpdated||(this.seenCookieUpdated=!0,this.updateSeenCookie()),this.sendOpenClick(e,this.activeIds.length))}updateSeenCookie(){const e=this.seenIds;if(this.activeIds){this.activeIds.forEach(s=>{e.includes(s)||e.push(s)});let t=0;for(;t<e.length&&!(e.length<=100);)this.activeIds.indexOf(e[t])===-1&&(e.splice(t,1),t-=1),t+=1;R.set("seen_notifications",e),this.setSeenBadge()}}sendOpenClick(e,t){i({element:e.currentTarget,data:{action:$,category:"Header",value:t}})}sendCompleteEvent(e){i({element:e.currentTarget,data:{action:A,category:"Header",label:e.currentTarget.dataset.trackingLabel,value:parseInt(e.currentTarget.dataset.position,10)}})}marketingTemplate(e,t){const{id:s,title:a,url:b,new_tab:f,image:L,button_text:_}=e,C=`
      href="${b}"
      data-action="click->notifications-menu#sendCompleteEvent"
      data-tracking-label="${a}"
      data-position="${t}"
      ${f?'target="_blank"':""}
    `;return`
      <li class="notification-item marketing-notification" data-id="${s}">
        <a ${C}>
          <img src="${L.large.url}" onerror="this.remove();" />
          <h6 class="marketing-notification__title">${a}</h6>
          <button class="ez-btn ez-btn--medium marketing-notification__btn">${_}</button>
        </a>
      </li>
    `}setSeenBadge(){this.unseenBadgeTarget.innerHTML="",this.unseenBadgeTarget.classList.add("is-hidden")}}v.targets=["menuButton","list","unseenBadge","spinner"];S("header_custom_design_links")&&y(()=>Promise.resolve({}),["assets/explore_custom_design_component-fb15f5d1.css"]);E([["site-header",u],["explore-nav",M],["notifications-menu",v]]);
