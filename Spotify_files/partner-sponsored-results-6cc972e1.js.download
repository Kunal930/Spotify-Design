var u=Object.defineProperty;var d=(r,t,e)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>(d(r,typeof t!="symbol"?t+"":t,e),e);import{r as l}from"./stimulus-helpers-50266f37.js";import{E as p}from"./ez-base-controller-29e49ea5.js";import{C as c}from"./js.cookie-c0fbedcc.js";import{a as m}from"./search-helpers-68c4a0d8.js";import{findCategoryByElement as h,sendTrackingEvent as o}from"./tracking-0dbb49c1.js";import{ad as g,ae as T}from"./actions-6b3b15bd.js";import{P as R}from"./partner-image-results-b0994c47.js";import"./_commonjsHelpers-de833af9.js";import"./helpers-a84f7625.js";import"./init-user-05a6553c.js";import"./index-266db5bb.js";import"./partner-id-helpers-1c8ec9a7.js";class i extends p{constructor(){super(...arguments);s(this,"noResultTimer",null);s(this,"clearNoResultsTimeout",e=>{e.detail!=="END_OF_RESULTS"&&window.clearTimeout(this.noResultTimer)});s(this,"addMoreButtonHref",()=>{const e=document.querySelector(".ez-resource-grid__view-more");e&&(e.href=this.generateSearchUrl)})}connect(){const e=h(this.element);o({element:this.element,data:{action:g,category:e,label:`Terms-${this.termsValue}`,non_interaction:!0}}),this.searchTerm=this.apiResultsWrapperTarget.getAttribute("data-keyword"),this.resourceID=this.apiResultsWrapperTarget.getAttribute("data-resource-id"),this.impactRadiusCouponCodeUrl=this.element.getAttribute("data-impact-radius-coupon-code-url"),this.sharedId=this.element.getAttribute("data-sharedid"),this.subId1=this.element.getAttribute("data-subid-one"),this.subId2=this.element.getAttribute("data-subid-two"),this.partnerServiceUrl=this.element.getAttribute("data-partner-service-url"),this.getPartnerImageResults(),this.noResultTimer=setTimeout(()=>{this.element.querySelector(".ez-resource-thumb")||this.element.parentNode.removeChild(this.element)},this.noResultsDelay),window.addEventListener("resultsLoaded",this.clearNoResultsTimeout)}disconnect(){window.removeEventListener("resultsLoaded",this.clearNoResultsTimeout)}trackClick(e){o({element:this.element,data:{action:T,label:`Terms-${this.termsValue}`,partner_click_selection:e}})}get noResultsDelay(){return 15*1e3}get placement(){return this.apiResultsWrapperTarget.getAttribute("data-placement")}get adPlacement(){let e=document.querySelector("body").dataset.istockAdplacementSuffix;return e===void 0&&(e=""),this.resourceID?`ADP${e}`:m()?`NRP${e}`:`SRP${e}`}partnerClick(){this.trackClick("Partner-Content")}revealPromoCode(e){e.preventDefault(),this.trackClick("Partner-Coupon"),this.makeCouponWindow(),window.location=this.makeCouponCodePartnerUrl()}makeCouponCodePartnerUrl(){const e=`sharedid=${this.sharedId}&subId1=coupon&subId2=${this.subId2}&adtype=${this.adType}&adplacement=${this.adPlacement}&subId3=${encodeURI(this.searchTerm)}_CPN_${this.placement}&u=${encodeURI("https://www.shutterstock.com/pricing?coupon=EEZY15&coupon_code=EEZY15")}`;return`${this.impactRadiusCouponCodeUrl}&${e}`}makeCouponWindow(){const e=window.open("","partner-sale","width=520,height=340");e.location.href="/shutterstock-coupons/coupon_code"}getPartnerImageResults(){const e=new R(this.apiResultsWrapperTarget,this.searchTerm,this.partnerServiceUrl,this.addMoreButtonHref),a=e.makeUrlParams(this.sharedId,this.subId1,this.subId2,this.adType,this.adPlacement);e.getResults({controllerElem:this.element,page:this.apiResultsWrapperTarget.getAttribute("data-page"),placement:this.placement,affiliate:this.apiResultsWrapperTarget.getAttribute("data-affiliate"),apiparams:this.apiResultsWrapperTarget.getAttribute("data-apiparams"),impactRadiusUrl:this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url"),limit:this.apiResultsWrapperTarget.getAttribute("data-limit"),loc:this.apiResultsWrapperTarget.getAttribute("data-loc"),rowHeight:this.apiResultsWrapperTarget.getAttribute("data-row-height"),maxRows:this.apiResultsWrapperTarget.getAttribute("data-max-rows"),largeThumb:!0,urlparams:a,padWithTerm:this.apiResultsWrapperTarget.getAttribute("data-pad-with-term"),backfillImageUrl:this.apiResultsWrapperTarget.getAttribute("data-backfill-image-url")})}viewMoreClick(){this.trackClick("Partner-View More")}get generateSearchUrl(){if(typeof this.searchTerm>"u"||!this.searchTerm){const n=document.querySelector('[data-search-form-target="input"]');this.searchTerm=n.value}const e=encodeURI(this.searchTerm.replace(/-/g," "));let a=document.querySelector("body").dataset.istockAdplacementSuffix;return a===void 0&&(a=""),this.getContentType==="videos"?`${this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url")}&u=https%3A%2F%2Fwww.shutterstock.com%2Fvideo%2Fsearch%2F${e}&sharedid=www.vecteezy.com&subId1=view-more&subId2=${this.subId2}&adtype=${this.adType}&adplacement=VMB${a}&subId3=${this.searchTerm}_view_more_${this.placement}`:`${this.apiResultsWrapperTarget.getAttribute("data-impact-radius-url")}&u=https%3A%2F%2Fwww.shutterstock.com%2Fsearch%2F${e}%3Fimage_type%3D${this.getContentType}&sharedid=www.vecteezy.com&subId1=view-more&subId2=${this.subId2}&adtype=${this.adType}&adplacement=VMB${a}&subId3=${this.searchTerm}_view_more_${this.placement}`}get adType(){return c.get("content_type")||"vector"}get getContentType(){return["vector","png","svg"].includes(this.adType)?"vector":this.adType==="video"?"videos":"photo"}}s(i,"targets",["apiResultsWrapper","couponCodeLink"]),s(i,"values",{terms:String});l([["partner-sponsored-results",i]]);
